<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Your First Verbs â€” ZTF Dictionary</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#FAFAFA;
      --fg:#1a1a1a;
      --muted:#737373;
      --card:#ffffff;
      --border:#e5e5e5;
      --radius:12px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;line-height:1.6}
    header{padding:40px 24px 24px;max-width:900px;margin:0 auto;text-align:center}
    h1{margin:0 0 8px;font-size:32px;font-weight:700;letter-spacing:-.02em}
    .sub{color:var(--muted);font-size:15px;font-weight:400}
    .bar{display:flex;gap:12px;align-items:center;margin-top:24px;max-width:600px;margin-left:auto;margin-right:auto}
    input[type="search"]{
      flex:1;padding:14px 18px;border:1px solid var(--border);border-radius:var(--radius);
      font-size:15px;background:var(--card);outline:none;transition:border .2s;
    }
    input[type="search"]:focus{border-color:#999}
    .badge{font-size:13px;color:var(--muted);background:transparent;padding:0;font-weight:500}
    main{max-width:900px;margin:32px auto 80px;padding:0 24px}
    .vlist{list-style:none;margin:0;padding:0;display:grid;gap:16px}
    .vlist li{
      background:var(--card);border-radius:var(--radius);padding:20px 24px;
      border:1px solid var(--border);transition:all .2s ease;
    }
    .vlist li:hover{box-shadow:0 4px 16px rgba(0,0,0,.08);border-color:#d4d4d4}
    .item-row{display:flex;gap:16px;align-items:flex-start}
    .em{font-size:28px;line-height:1;flex-shrink:0}
    .content{flex:1;min-width:0}
    .top{display:flex;align-items:center;gap:12px;margin-bottom:8px;flex-wrap:wrap}
    .vverb{font-size:18px;font-weight:600;letter-spacing:-.01em}
    .ipa{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,monospace;font-size:13px;color:var(--muted)}
    .audio-btns{display:flex;gap:8px;align-items:center;margin-left:auto}
    .flag-btn{
      background:none;border:none;padding:4px;cursor:pointer;font-size:22px;
      opacity:.7;transition:all .2s;line-height:1;border-radius:6px;
    }
    .flag-btn:hover{opacity:1;background:rgba(0,0,0,.04)}
    .flag-btn:active{transform:scale(.9)}
    .translations{display:grid;gap:8px;margin-top:12px}
    .trans-row{display:flex;gap:8px;font-size:14px;line-height:1.5}
    .trans-label{color:var(--muted);font-weight:500;min-width:70px;flex-shrink:0}
    .trans-value{color:var(--fg)}
    footer{max-width:900px;margin:40px auto;padding:0 24px 40px;color:var(--muted);font-size:13px;text-align:center}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    @media (max-width:640px){
      header{padding:32px 20px 20px}
      h1{font-size:26px}
      main{padding:0 20px}
      .vlist li{padding:16px 18px}
      .em{font-size:24px}
      .vverb{font-size:16px}
      .audio-btns{margin-left:0;margin-top:4px}
      .top{flex-wrap:wrap}
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
  <header>
    <h1>Your First Verbs</h1>
    <div class="sub">ZTF Dictionary â€” Ã¡udio ðŸ‡ºðŸ‡¸/ðŸ‡¬ðŸ‡§, traduÃ§Ã£o literal e contextual.</div>
    <div class="bar">
      <input id="search" type="search" placeholder="Search verbs or translationsâ€¦" />
      <span class="badge" id="count">0 items</span>
    </div>
  </header>

  <main>
    <ul id="vlist" class="vlist"></ul>
  </main>

  <footer>
    ZTF Dictionary
  </footer>

  <audio id="player" class="sr-only"></audio>

  <script>
    const CSV_URL = 'your_first_verbs.csv';
    const AUDIO_BASE = './audios/';

    function slugifyVerb(infinitive){
      return infinitive
        .toLowerCase()
        .trim()
        .replace(/^to\s+/, 'to-')
        .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/^-+|-+$/g, '');
    }

    function audioUrl(infinitive, accent){
      return `${AUDIO_BASE}${slugifyVerb(infinitive)}.${accent}.mp3`;
    }

    function play(infinitive, accent){
      const src = audioUrl(infinitive, accent);
      const player = document.getElementById('player');
      player.src = src;
      player.play().catch(()=>{});
    }

    function listItemTemplate(item){
      const emoji = item['Emoji'] || 'ðŸ”¹';
      const verb = item['infinitive_verb'] || '';
      const ipa = item['infinitive_phonetic_us'] || '';
      const literal = item['literal_translation'] || '';
      const contextual = item['contextual_translation'] || '';

      return `
        <li>
          <div class="item-row">
            <div class="em">${emoji}</div>
            <div class="content">
              <div class="top">
                <div class="vverb">${verb}</div>
                <div class="ipa">${ipa}</div>
                <div class="audio-btns">
                  <button class="flag-btn" onclick="play('${verb.replace(/'/g, "\\'")}', 'us')" title="US pronunciation">ðŸ‡ºðŸ‡¸</button>
                  <button class="flag-btn" onclick="play('${verb.replace(/'/g, "\\'")}', 'uk')" title="UK pronunciation">ðŸ‡¬ðŸ‡§</button>
                </div>
              </div>
              <div class="translations">
                <div class="trans-row">
                  <div class="trans-label">Literal</div>
                  <div class="trans-value">${literal}</div>
                </div>
                <div class="trans-row">
                  <div class="trans-label">Contextual</div>
                  <div class="trans-value">${contextual}</div>
                </div>
              </div>
            </div>
          </div>
        </li>
      `;
    }

    function render(data){
      const q = (document.getElementById('search').value || '').toLowerCase().trim();
      const filtered = !q ? data : data.filter(it => {
        const fields = [
          it['Emoji'],
          it['infinitive_verb'],
          it['infinitive_phonetic_us'],
          it['literal_translation'],
          it['contextual_translation']
        ].join(' ').toLowerCase();
        return fields.includes(q);
      });

      document.getElementById('count').textContent = `${filtered.length} verb${filtered.length!==1?'s':''}`;

      const items = filtered.map(listItemTemplate).join('');
      document.getElementById('vlist').innerHTML = items;
    }

    function init(){
      Papa.parse(CSV_URL, {
        header: true,
        download: true,
        complete: (results) => {
          const data = results.data.filter(Boolean);
          const search = document.getElementById('search');
          search.addEventListener('input', () => render(data));
          render(data);
        },
        error: (err) => {
          console.error('CSV error', err);
          document.getElementById('count').textContent = 'Error loading CSV';
        }
      });
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
