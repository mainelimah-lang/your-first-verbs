<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Your First Verbs â€” ZTF Dictionary</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#FAFAFA;
      --fg:#1a1a1a;
      --muted:#737373;
      --card:#ffffff;
      --border:#e5e5e5;
      --radius:12px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;line-height:1.6}
    header{padding:40px 24px 24px;max-width:900px;margin:0 auto;text-align:center}
    h1{margin:0 0 8px;font-size:32px;font-weight:700;letter-spacing:-.02em}
    .sub{color:var(--muted);font-size:15px;font-weight:400}
    .bar{display:flex;gap:12px;align-items:center;margin-top:24px;max-width:600px;margin-left:auto;margin-right:auto}
    input[type="search"]{
      flex:1;padding:14px 18px;border:1px solid var(--border);border-radius:var(--radius);
      font-size:15px;background:var(--card);outline:none;transition:border .2s;
    }
    input[type="search"]:focus{border-color:#999}
    .badge{font-size:13px;color:var(--muted);background:transparent;padding:0;font-weight:500}
    main{max-width:1200px;margin:32px auto 80px;padding:0 24px}
    table{width:100%;border-collapse:separate;border-spacing:0 8px;margin-top:20px}
    thead th{font-size:12px;text-transform:uppercase;letter-spacing:.6px;color:var(--muted);text-align:left;padding:12px 16px;font-weight:600;border-bottom:1px solid var(--border)}
    tbody tr{background:var(--card);border-radius:var(--radius);transition:all .2s ease}
    tbody tr:hover{box-shadow:0 4px 16px rgba(0,0,0,.08)}
    tbody td{padding:16px;vertical-align:middle;border-bottom:1px solid #f5f5f5}
    .emoji-col{width:60px;text-align:center;font-size:20px}
    .verb-col{width:180px;font-weight:600;font-size:16px}
    .audio-col{width:120px;text-align:center}
    .transcription-col{width:140px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,monospace;font-size:13px;color:var(--muted)}
    .translation-col{width:200px;font-size:14px;line-height:1.4}
    .audio-group{display:flex;align-items:center;gap:6px;justify-content:center}
    .flag{font-size:16px}
    .speaker-btn{
      background:none;border:none;padding:4px;cursor:pointer;font-size:14px;
      opacity:.7;transition:all .2s;line-height:1;border-radius:4px;
    }
    .speaker-btn:hover{opacity:1;background:rgba(0,0,0,.04)}
    .speaker-btn:active{transform:scale(.9)}
    footer{max-width:900px;margin:40px auto;padding:0 24px 40px;color:var(--muted);font-size:13px;text-align:center}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
      @media (max-width:640px){
        header{padding:32px 20px 20px}
        h1{font-size:26px}
        main{padding:0 20px}
        table{font-size:12px}
        .emoji-col{width:40px;font-size:16px}
        .verb-col{width:120px;font-size:14px}
        .audio-col{width:80px}
        .transcription-col{width:100px;font-size:11px}
        .translation-col{width:150px;font-size:12px}
        tbody td{padding:12px 8px}
      }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
  <header>
    <h1>Your First Verbs</h1>
    <div class="sub">ZTF Dictionary â€” Ã¡udio ðŸ‡ºðŸ‡¸/ðŸ‡¬ðŸ‡§, traduÃ§Ã£o literal e contextual.</div>
    <div class="bar">
      <input id="search" type="search" placeholder="Search verbs or translationsâ€¦" />
      <span class="badge" id="count">0 items</span>
    </div>
  </header>

  <main>
    <table>
      <thead>
        <tr>
          <th class="emoji-col">Emoji</th>
          <th class="verb-col">Verb</th>
          <th class="audio-col">Audio US</th>
          <th class="transcription-col">Transcription US</th>
          <th class="audio-col">Audio UK</th>
          <th class="transcription-col">Transcription UK</th>
          <th class="translation-col">Literal Translation</th>
          <th class="translation-col">Contextual Translation</th>
        </tr>
      </thead>
      <tbody id="rows"></tbody>
    </table>
  </main>

  <footer>
    ZTF Dictionary
  </footer>

  <audio id="player" class="sr-only"></audio>

  <script>
    const CSV_URL = 'your_first_verbs.csv';
    const AUDIO_BASE = './audios/';

    function slugifyVerb(infinitive){
      return infinitive
        .toLowerCase()
        .trim()
        .replace(/^to\s+/, 'to-')
        .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/^-+|-+$/g, '');
    }

    function audioUrl(infinitive, accent){
      return `${AUDIO_BASE}${slugifyVerb(infinitive)}.${accent}.mp3`;
    }

    function play(infinitive, accent){
      const src = audioUrl(infinitive, accent);
      const player = document.getElementById('player');
      player.src = src;
      player.play().catch(()=>{});
    }

    function rowTemplate(item){
      const emoji = item['Emoji'] || 'ðŸ”¹';
      const verb = item['infinitive_verb'] || '';
      const ipa = item['infinitive_phonetic_us'] || '';
      const literal = item['literal_translation'] || '';
      const contextual = item['contextual_translation'] || '';

      return `
        <tr>
          <td class="emoji-col">${emoji}</td>
          <td class="verb-col">${verb}</td>
          <td class="audio-col">
            <div class="audio-group">
              <span class="flag">ðŸ‡ºðŸ‡¸</span>
              <button class="speaker-btn" onclick="play('${verb.replace(/'/g, "\\'")}', 'us')" title="US pronunciation">ðŸ”Š</button>
            </div>
          </td>
          <td class="transcription-col">${ipa}</td>
          <td class="audio-col">
            <div class="audio-group">
              <span class="flag">ðŸ‡¬ðŸ‡§</span>
              <button class="speaker-btn" onclick="play('${verb.replace(/'/g, "\\'")}', 'uk')" title="UK pronunciation">ðŸ”Š</button>
            </div>
          </td>
          <td class="transcription-col">${ipa}</td>
          <td class="translation-col">${literal}</td>
          <td class="translation-col">${contextual}</td>
        </tr>
      `;
    }

    function render(data){
      const q = (document.getElementById('search').value || '').toLowerCase().trim();
      const filtered = !q ? data : data.filter(it => {
        const fields = [
          it['Emoji'],
          it['infinitive_verb'],
          it['infinitive_phonetic_us'],
          it['literal_translation'],
          it['contextual_translation']
        ].join(' ').toLowerCase();
        return fields.includes(q);
      });

      document.getElementById('count').textContent = `${filtered.length} verb${filtered.length!==1?'s':''}`;

      const rows = filtered.map(rowTemplate).join('');
      document.getElementById('rows').innerHTML = rows;
    }

    function init(){
      Papa.parse(CSV_URL, {
        header: true,
        download: true,
        complete: (results) => {
          const data = results.data.filter(Boolean);
          const search = document.getElementById('search');
          search.addEventListener('input', () => render(data));
          render(data);
        },
        error: (err) => {
          console.error('CSV error', err);
          document.getElementById('count').textContent = 'Error loading CSV';
        }
      });
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
